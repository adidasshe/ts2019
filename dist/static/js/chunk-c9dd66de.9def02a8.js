(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c9dd66de"],{"114c":function(t,i){!function(t,i,e){"use strict";t.L.Toolbar2=(L.Layer||L.Class).extend({statics:{baseClass:"leaflet-toolbar"},options:{className:"",filter:function(){return!0},actions:[]},initialize:function(t){L.setOptions(this,t),this._toolbar_type=this.constructor._toolbar_class_id},addTo:function(t){return this._arguments=[].slice.call(arguments),t.addLayer(this),this},onAdd:function(t){var i=t._toolbars[this._toolbar_type];0===this._calculateDepth()&&(i&&t.removeLayer(i),t._toolbars[this._toolbar_type]=this)},onRemove:function(t){0===this._calculateDepth()&&delete t._toolbars[this._toolbar_type]},appendToContainer:function(t){var i,e,n,o,s=this.constructor.baseClass+"-"+this._calculateDepth()+" "+this.options.className;for(this._container=t,this._ul=L.DomUtil.create("ul",s,t),this._disabledEvents=["click","mousemove","dblclick","mousedown","mouseup","touchstart"],e=0,o=this._disabledEvents.length;e<o;e++)L.DomEvent.on(this._ul,this._disabledEvents[e],L.DomEvent.stopPropagation);for(i=0,n=this.options.actions.length;i<n;i++)(new(this._getActionConstructor(this.options.actions[i])))._createIcon(this,this._ul,this._arguments)},_getActionConstructor:function(t){var i=this._arguments,e=this;return t.extend({initialize:function(){t.prototype.initialize.apply(this,i)},enable:function(i){e._active&&e._active.disable(),e._active=this,t.prototype.enable.call(this,i)}})},_hide:function(){this._ul.style.display="none"},_show:function(){this._ul.style.display="block"},_calculateDepth:function(){for(var t=0,i=this.parentToolbar;i;)t+=1,i=i.parentToolbar;return t}}),L.Evented||L.Toolbar2.include(L.Mixin.Events),L.toolbar={};var n=0;L.Toolbar2.extend=function(t){var i=L.extend({},t.statics,{_toolbar_class_id:n});return n+=1,L.extend(t,{statics:i}),L.Class.extend.call(this,t)},L.Map.addInitHook((function(){this._toolbars={}})),L.Toolbar2.Action=L.Handler.extend({statics:{baseClass:"leaflet-toolbar-icon"},options:{toolbarIcon:{html:"",className:"",tooltip:""},subToolbar:new L.Toolbar2},initialize:function(t){var i=L.Toolbar2.Action.prototype.options.toolbarIcon;L.setOptions(this,t),this.options.toolbarIcon=L.extend({},i,this.options.toolbarIcon)},enable:function(t){t&&L.DomEvent.preventDefault(t),this._enabled||(this._enabled=!0,this.addHooks&&this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks&&this.removeHooks())},_createIcon:function(t,i,e){var n=this.options.toolbarIcon;this.toolbar=t,this._icon=L.DomUtil.create("li","",i),this._link=L.DomUtil.create("a","",this._icon),this._link.innerHTML=n.html,this._link.setAttribute("href","#"),this._link.setAttribute("title",n.tooltip),L.DomUtil.addClass(this._link,this.constructor.baseClass),n.className&&L.DomUtil.addClass(this._link,n.className),L.DomEvent.on(this._link,"click",this.enable,this),this._addSubToolbar(t,this._icon,e)},_addSubToolbar:function(t,i,e){var n=this.options.subToolbar,o=this.addHooks,s=this.removeHooks;n.parentToolbar=t,n.options.actions.length>0&&((e=[].slice.call(e)).push(this),n.addTo.apply(n,e),n.appendToContainer(i),this.addHooks=function(t){"function"==typeof o&&o.call(this,t),n._show()},this.removeHooks=function(t){"function"==typeof s&&s.call(this,t),n._hide()})}}),L.toolbarAction=function(t){return new L.Toolbar2.Action(t)},L.Toolbar2.Action.extendOptions=function(t){return this.extend({options:t})},L.Toolbar2.Control=L.Toolbar2.extend({statics:{baseClass:"leaflet-control-toolbar "+L.Toolbar2.baseClass},initialize:function(t){L.Toolbar2.prototype.initialize.call(this,t),this._control=new L.Control.Toolbar(this.options)},onAdd:function(t){this._control.addTo(t),L.Toolbar2.prototype.onAdd.call(this,t),this.appendToContainer(this._control.getContainer())},onRemove:function(t){L.Toolbar2.prototype.onRemove.call(this,t),this._control.remove?this._control.remove():this._control.removeFrom(t)}}),L.Control.Toolbar=L.Control.extend({onAdd:function(){return L.DomUtil.create("div","")}}),L.toolbar.control=function(t){return new L.Toolbar2.Control(t)},L.Toolbar2.Popup=L.Toolbar2.extend({statics:{baseClass:"leaflet-popup-toolbar "+L.Toolbar2.baseClass},options:{anchor:[0,0]},initialize:function(t,i){L.Toolbar2.prototype.initialize.call(this,i),this._marker=new L.Marker(t,{icon:new L.DivIcon({className:this.options.className,iconAnchor:[0,0]})})},onAdd:function(t){this._map=t,this._marker.addTo(t),L.Toolbar2.prototype.onAdd.call(this,t),this.appendToContainer(this._marker._icon),this._setStyles()},onRemove:function(t){t.removeLayer(this._marker),L.Toolbar2.prototype.onRemove.call(this,t),delete this._map},setLatLng:function(t){return this._marker.setLatLng(t),this},_setStyles:function(){for(var t,i,e,n=this._container,o=this._ul,s=L.point(this.options.anchor),a=o.querySelectorAll(".leaflet-toolbar-icon"),r=[],c=0,h=0,l=a.length;h<l;h++)a[h].parentNode.parentNode===o&&(r.push(parseInt(L.DomUtil.getStyle(a[h],"height"),10)),c+=Math.ceil(parseFloat(L.DomUtil.getStyle(a[h],"width"))),c+=Math.ceil(parseFloat(L.DomUtil.getStyle(a[h],"border-right-width"))));o.style.width=c+"px",this._tipContainer=L.DomUtil.create("div","leaflet-toolbar-tip-container",n),this._tipContainer.style.width=c+Math.ceil(parseFloat(L.DomUtil.getStyle(o,"border-left-width")))+"px",this._tip=L.DomUtil.create("div","leaflet-toolbar-tip",this._tipContainer),t=Math.max.apply(void 0,r),o.style.height=t+"px",i=parseInt(L.DomUtil.getStyle(this._tip,"width"),10),e=new L.Point(c/2,t+1.414*i),n.style.marginLeft=s.x-e.x+"px",n.style.marginTop=s.y-e.y+"px"}}),L.toolbar.popup=function(t){return new L.Toolbar2.Popup(t)}}(window,document)},"213b":function(t,i,e){!function(i,n){t.exports=n(e("e11eb"))}(window,(function(t){return function(t){var i={};function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)e.d(n,o,function(i){return t[i]}.bind(null,o));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=2)}([function(i,e){i.exports=t},,function(t,i,e){"use strict";e.r(i);var n=e(0),o=e.n(n);const s=o.a.Control.extend({options:{position:"topright",showOptions:!0,showInfo:!0,showSlider:!0,autoPlay:!1},initialize:function(t,i){o.a.Control.prototype.initialize.call(this,i),this.trackPlayBack=t,this.trackPlayBack.on("tick",this._tickCallback,this)},onAdd:function(t){return this._initContainer(),this._container},onRemove:function(t){this.trackPlayBack.dispose(),this.trackPlayBack.off("tick",this._tickCallback,this)},getTimeStrFromUnix:function(t,i="s"){t=parseInt(1e3*t);let e=new Date(t),n=e.getFullYear(),o=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,s=e.getDate()<10?"0"+e.getDate():e.getDate(),a=e.getHours()<10?"0"+e.getHours():e.getHours(),r=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),c=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return"d"===i?n+"-"+o+"-"+s:"h"===i?n+"-"+o+"-"+s+" "+a:"m"===i?n+"-"+o+"-"+s+" "+a+":"+r:n+"-"+o+"-"+s+" "+a+":"+r+":"+c},_initContainer:function(){return this._container=o.a.DomUtil.create("div","leaflet-control-playback"),o.a.DomEvent.disableClickPropagation(this._container),this._optionsContainer=this._createContainer("optionsContainer",this._container),this._buttonContainer=this._createContainer("buttonContainer",this._container),this._infoContainer=this._createContainer("infoContainer",this._container),this._sliderContainer=this._createContainer("sliderContainer",this._container),this._pointCbx=this._createCheckbox("显示轨迹点","show-trackpoint",this._optionsContainer,this._showTrackPoint),this._lineCbx=this._createCheckbox("显示轨迹线","show-trackLine",this._optionsContainer,this._showTrackLine),this._playBtn=this._createButton("播放","btn-stop",this._buttonContainer,this._play),this._restartBtn=this._createButton("重播","btn-restart",this._buttonContainer,this._restart),this._slowSpeedBtn=this._createButton("减速","btn-slow",this._buttonContainer,this._slow),this._quickSpeedBtn=this._createButton("加速","btn-quick",this._buttonContainer,this._quick),this._closeBtn=this._createButton("关闭","btn-close",this._buttonContainer,this._close),this._infoStartTime=this._createInfo("开始时间: ",this.getTimeStrFromUnix(this.trackPlayBack.getStartTime()),"info-start-time",this._infoContainer),this._infoEndTime=this._createInfo("结束时间: ",this.getTimeStrFromUnix(this.trackPlayBack.getEndTime()),"info-end-time",this._infoContainer),this._infoCurTime=this._createInfo("当前时间: ",this.getTimeStrFromUnix(this.trackPlayBack.getCurTime()),"info-cur-time",this._infoContainer),this._infoSpeedRatio=this._createInfo("倍数: ",`X${this.trackPlayBack.getSpeed()}`,"info-speed-ratio",this._infoContainer),this._slider=this._createSlider("time-slider",this._sliderContainer,this._scrollchange),this._container},_createContainer:function(t,i){return o.a.DomUtil.create("div",t,i)},_createCheckbox:function(t,i,e,n){let s=o.a.DomUtil.create("div",i+" trackplayback-checkbox",e),a=o.a.DomUtil.create("input","trackplayback-input",s),r=`trackplayback-input-${o.a.Util.stamp(a)}`;a.setAttribute("type","checkbox"),a.setAttribute("id",r);let c=o.a.DomUtil.create("label","trackplayback-label",s);return c.setAttribute("for",r),c.innerHTML=t,o.a.DomEvent.on(a,"change",n,this),s},_createButton:function(t,i,e,n){let s=o.a.DomUtil.create("a",i,e);return s.href="#",s.title=t,s.setAttribute("role","button"),s.setAttribute("aria-label",t),o.a.DomEvent.disableClickPropagation(s),o.a.DomEvent.on(s,"click",n,this),s},_createInfo:function(t,i,e,n){let s=o.a.DomUtil.create("div","info-container",n);o.a.DomUtil.create("span","info-title",s).innerHTML=t;let a=o.a.DomUtil.create("span",e,s);return a.innerHTML=i,a},_createSlider:function(t,i,e){let n=o.a.DomUtil.create("input",t,i);return n.setAttribute("type","range"),n.setAttribute("min",this.trackPlayBack.getStartTime()),n.setAttribute("max",this.trackPlayBack.getEndTime()),n.setAttribute("value",this.trackPlayBack.getCurTime()),o.a.DomEvent.on(n,"click mousedown dbclick",o.a.DomEvent.stopPropagation).on(n,"click",o.a.DomEvent.preventDefault).on(n,"change",e,this).on(n,"mousemove",e,this),n},_showTrackPoint(t){t.target.checked?this.trackPlayBack.showTrackPoint():this.trackPlayBack.hideTrackPoint()},_showTrackLine(t){t.target.checked?this.trackPlayBack.showTrackLine():this.trackPlayBack.hideTrackLine()},_play:function(){o.a.DomUtil.hasClass(this._playBtn,"btn-stop")?(o.a.DomUtil.removeClass(this._playBtn,"btn-stop"),o.a.DomUtil.addClass(this._playBtn,"btn-start"),this._playBtn.setAttribute("title","停止"),this.trackPlayBack.start()):(o.a.DomUtil.removeClass(this._playBtn,"btn-start"),o.a.DomUtil.addClass(this._playBtn,"btn-stop"),this._playBtn.setAttribute("title","播放"),this.trackPlayBack.stop())},_restart:function(){o.a.DomUtil.removeClass(this._playBtn,"btn-stop"),o.a.DomUtil.addClass(this._playBtn,"btn-start"),this._playBtn.setAttribute("title","停止"),this.trackPlayBack.rePlaying()},_slow:function(){this.trackPlayBack.slowSpeed();let t=this.trackPlayBack.getSpeed();this._infoSpeedRatio.innerHTML=`X${t}`},_quick:function(){this.trackPlayBack.quickSpeed();let t=this.trackPlayBack.getSpeed();this._infoSpeedRatio.innerHTML=`X${t}`},_close:function(){return o.a.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this},_scrollchange:function(t){let i=Number(t.target.value);this.trackPlayBack.setCursor(i)},_tickCallback:function(t){let i=this.getTimeStrFromUnix(t.time);this._infoCurTime.innerHTML=i,this._slider.value=t.time,t.time>=this.trackPlayBack.getEndTime()&&(o.a.DomUtil.removeClass(this._playBtn,"btn-start"),o.a.DomUtil.addClass(this._playBtn,"btn-stop"),this._playBtn.setAttribute("title","播放"),this.trackPlayBack.stop())}});o.a.TrackPlayBackControl=s,o.a.trackplaybackcontrol=function(t,i){return new s(t,i)}}])}))},"6cc5":function(t,i,e){},a46e:function(t,i,e){!function(i,n){t.exports=n(e("e11eb"))}(window,(function(t){return function(t){var i={};function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)e.d(n,o,function(i){return t[i]}.bind(null,o));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=1)}([function(i,e){i.exports=t},function(t,i,e){"use strict";e.r(i);var n=e(0),o=e.n(n);function s(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}const a=o.a.Class.extend({initialize:function(t=[],i){o.a.setOptions(this,i),t.forEach(t=>{t.isOrigin=!0}),this._trackPoints=t,this._timeTick={},this._update()},addTrackPoint:function(t){if(s(t))for(let i=0,e=t.length;i<e;i++)this.addTrackPoint(t[i]);this._addTrackPoint(t)},getTimes:function(){let t=[];for(let i=0,e=this._trackPoints.length;i<e;i++)t.push(this._trackPoints[i].time);return t},getStartTrackPoint:function(){return this._trackPoints[0]},getEndTrackPoint:function(){return this._trackPoints[this._trackPoints.length-1]},getTrackPointByTime:function(t){return this._trackPoints[this._timeTick[t]]},_getCalculateTrackPointByTime:function(t){let i=this.getTrackPointByTime(t),e=this.getStartTrackPoint(),n=this.getEndTrackPoint(),s=this.getTimes();if(t<e.time||t>n.time)return;let a,r=0,c=s.length-1;if(r===c)return i;for(;c-r!=1;)t>s[a=parseInt((r+c)/2)]?r=a:c=a;let h=s[r],l=s[c],u=t,p=this.getTrackPointByTime(h),_=this.getTrackPointByTime(l);e=o.a.point(p.lng,p.lat),n=o.a.point(_.lng,_.lat);let d=e.distanceTo(n);if(d<=0)return _;let k=d/(l-h),m=(n.y-e.y)/d,f=(n.x-e.x)/d,T=k*(u-h),b=e.x+T*f,g=e.y+T*m,y=n.x>=e.x?180*(.5*Math.PI-Math.asin(m))/Math.PI:180*(1.5*Math.PI+Math.asin(m))/Math.PI;return i?void 0===i.dir&&(i.dir=y):i={lng:b,lat:g,dir:y,isOrigin:!1,time:t},i},getTrackPointsBeforeTime:function(t){let i=[];for(let n=0,o=this._trackPoints.length;n<o;n++)this._trackPoints[n].time<t&&i.push(this._trackPoints[n]);let e=this._getCalculateTrackPointByTime(t);return e&&i.push(e),i},_addTrackPoint:function(t){t.isOrigin=!0,this._trackPoints.push(t),this._update()},_update:function(){this._sortTrackPointsByTime(),this._updatetimeTick()},_sortTrackPointsByTime:function(){let t=this._trackPoints.length;for(let i=0;i<t;i++)for(let e=0;e<t-1-i;e++)if(this._trackPoints[e].time>this._trackPoints[e+1].time){let t=this._trackPoints[e+1];this._trackPoints[e+1]=this._trackPoints[e],this._trackPoints[e]=t}},_updatetimeTick:function(){this._timeTick={};for(let t=0,i=this._trackPoints.length;t<i;t++)this._timeTick[this._trackPoints[t].time]=t}}),r=o.a.Class.extend({initialize:function(t=[],i,e){o.a.setOptions(this,e),this._tracks=[],this.addTrack(t),this._draw=i,this._updateTime()},getMinTime:function(){return this._minTime},getMaxTime:function(){return this._maxTime},addTrack:function(t){if(s(t))for(let i=0,e=t.length;i<e;i++)this.addTrack(t[i]);else{if(!(t instanceof a))throw new Error("tracks must be an instance of `Track` or an array of `Track` instance!");this._tracks.push(t),this._updateTime()}},drawTracksByTime:function(t){this._draw.clear();for(let i=0,e=this._tracks.length;i<e;i++){let e=this._tracks[i].getTrackPointsBeforeTime(t);e&&e.length&&this._draw.drawTrack(e)}},_updateTime:function(){this._minTime=this._tracks[0].getStartTrackPoint().time,this._maxTime=this._tracks[0].getEndTrackPoint().time;for(let t=0,i=this._tracks.length;t<i;t++){let i=this._tracks[t].getStartTrackPoint().time,e=this._tracks[t].getEndTrackPoint().time;i<this._minTime&&(this._minTime=i),e>this._maxTime&&(this._maxTime=e)}}}),c=o.a.Class.extend({includes:o.a.Mixin.Events,options:{speed:1,maxSpeed:30},initialize:function(t,i){o.a.setOptions(this,i),this._trackController=t,this._endTime=this._trackController.getMaxTime(),this._curTime=this._trackController.getMinTime(),this._speed=this.options.speed,this._maxSpeed=this.options.maxSpeed,this._intervalID=null,this._lastFpsUpdateTime=0},start:function(){this._intervalID||(this._intervalID=o.a.Util.requestAnimFrame(this._tick,this))},stop:function(){this._intervalID&&(o.a.Util.cancelAnimFrame(this._intervalID),this._intervalID=null,this._lastFpsUpdateTime=0)},rePlaying:function(){this.stop(),this._curTime=this._trackController.getMinTime(),this.start()},slowSpeed:function(){this._speed=this._speed<=1?this._speed:this._speed-1,this._intervalID&&(this.stop(),this.start())},quickSpeed:function(){this._speed=this._speed>=this._maxSpeed?this._speed:this._speed+1,this._intervalID&&(this.stop(),this.start())},getSpeed:function(){return this._speed},getCurTime:function(){return this._curTime},getStartTime:function(){return this._trackController.getMinTime()},getEndTime:function(){return this._trackController.getMaxTime()},isPlaying:function(){return!!this._intervalID},setCursor:function(t){this._curTime=t,this._trackController.drawTracksByTime(this._curTime),this.fire("tick",{time:this._curTime})},setSpeed:function(t){this._speed=t,this._intervalID&&(this.stop(),this.start())},_caculatefpsTime:function(t){let i;return i=0===this._lastFpsUpdateTime?0:t-this._lastFpsUpdateTime,this._lastFpsUpdateTime=t,i/1e3},_tick:function(){let t=+new Date,i=!1,e=this._caculatefpsTime(t)*Math.pow(2,this._speed-1);this._curTime+=e,this._curTime>=this._endTime&&(this._curTime=this._endTime,i=!0),this._trackController.drawTracksByTime(this._curTime),this.fire("tick",{time:this._curTime}),i||(this._intervalID=o.a.Util.requestAnimFrame(this._tick,this))}}),h=o.a.Renderer.extend({initialize:function(t){o.a.Renderer.prototype.initialize.call(this,t),this.options.padding=.1},onAdd:function(t){this._container=o.a.DomUtil.create("canvas","leaflet-zoom-animated"),t.getPane(this.options.pane).appendChild(this._container),this._ctx=this._container.getContext("2d"),this._update()},onRemove:function(t){o.a.DomUtil.remove(this._container)},getContainer:function(){return this._container},getBounds:function(){return this._bounds},_update:function(){if(!this._map._animatingZoom||!this._bounds){o.a.Renderer.prototype._update.call(this);var t=this._bounds,i=this._container,e=t.getSize(),n=o.a.Browser.retina?2:1;o.a.DomUtil.setPosition(i,t.min),i.width=n*e.x,i.height=n*e.y,i.style.width=e.x+"px",i.style.height=e.y+"px",o.a.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}}}),l=o.a.Class.extend({trackPointOptions:{isDraw:!1,useCanvas:!0,stroke:!1,color:"#ef0300",fill:!0,fillColor:"#ef0300",opacity:.3,radius:4},trackLineOptions:{isDraw:!1,stroke:!0,color:"#1C54E2",weight:2,fill:!1,fillColor:"#000",opacity:.5},targetOptions:{useImg:!1,imgUrl:"./images/icon-play.png",width:25,height:30,color:"#00f",fillColor:"#9FD12D"},toolTipOptions:{offset:[0,0],direction:"top",permanent:!1},initialize:function(t,i){if(o.a.extend(this.trackPointOptions,i.trackPointOptions),o.a.extend(this.trackLineOptions,i.trackLineOptions),o.a.extend(this.targetOptions,i.targetOptions),o.a.extend(this.toolTipOptions,i.toolTipOptions),this._showTrackPoint=this.trackPointOptions.isDraw,this._showTrackLine=this.trackLineOptions.isDraw,this._map=t,this._map.on("mousemove",this._onmousemoveEvt,this),this._trackLayer=(new h).addTo(t),this._trackLayer.on("update",this._trackLayerUpdate,this),this._canvas=this._trackLayer.getContainer(),this._ctx=this._canvas.getContext("2d"),this._bufferTracks=[],this.trackPointOptions.useCanvas||(this._trackPointFeatureGroup=o.a.featureGroup([]).addTo(t)),this.targetOptions.useImg){const t=new Image;t.onload=()=>{this._targetImg=t},t.onerror=()=>{throw new Error("img load error!")},t.src=this.targetOptions.imgUrl}},update:function(){this._trackLayerUpdate()},drawTrack:function(t){this._bufferTracks.push(t),this._drawTrack(t)},showTrackPoint:function(){this._showTrackPoint=!0,this.update()},hideTrackPoint:function(){this._showTrackPoint=!1,this.update()},showTrackLine:function(){this._showTrackLine=!0,this.update()},hideTrackLine:function(){this._showTrackLine=!1,this.update()},remove:function(){this._bufferTracks=[],this._trackLayer.off("update",this._trackLayerUpdate,this),this._map.off("mousemove",this._onmousemoveEvt,this),this._map.hasLayer(this._trackLayer)&&this._map.removeLayer(this._trackLayer),this._map.hasLayer(this._trackPointFeatureGroup)&&this._map.removeLayer(this._trackPointFeatureGroup)},clear:function(){this._clearLayer(),this._bufferTracks=[]},_trackLayerUpdate:function(){this._bufferTracks.length&&(this._clearLayer(),this._bufferTracks.forEach(function(t,i){this._drawTrack(t)}.bind(this)))},_onmousemoveEvt:function(t){if(!this._showTrackPoint)return;let i=t.layerPoint;if(this._bufferTracks.length)for(let e=0,n=this._bufferTracks.length;e<n;e++)for(let t=0,o=this._bufferTracks[e].length;t<o;t++){let n=this._getLayerPoint(this._bufferTracks[e][t]);if(i.distanceTo(n)<=this.trackPointOptions.radius)return void this._opentoolTip(this._bufferTracks[e][t])}this._map.hasLayer(this._tooltip)&&this._map.removeLayer(this._tooltip),this._canvas.style.cursor="pointer"},_opentoolTip:function(t){this._map.hasLayer(this._tooltip)&&this._map.removeLayer(this._tooltip),this._canvas.style.cursor="default";let i=o.a.latLng(t.lat,t.lng),e=this._tooltip=o.a.tooltip(this.toolTipOptions);e.setLatLng(i),e.addTo(this._map),e.setContent(this._getTooltipText(t))},_drawTrack:function(t){this._showTrackLine&&this._drawTrackLine(t);let i=t[t.length-1];this.targetOptions.useImg&&this._targetImg?this._drawShipImage(i):this._drawShipCanvas(i),this._showTrackPoint&&(this.trackPointOptions.useCanvas?this._drawTrackPointsCanvas(t):this._drawTrackPointsSvg(t))},_drawTrackLine:function(t){let i=this.trackLineOptions,e=this._getLayerPoint(t[0]);this._ctx.save(),this._ctx.beginPath(),this._ctx.moveTo(e.x,e.y);for(let n=1,o=t.length;n<o;n++){let i=this._getLayerPoint(t[n]);this._ctx.lineTo(i.x,i.y)}this._ctx.globalAlpha=i.opacity,i.stroke&&(this._ctx.strokeStyle=i.color,this._ctx.lineWidth=i.weight,this._ctx.stroke()),i.fill&&(this._ctx.fillStyle=i.fillColor,this._ctx.fill()),this._ctx.restore()},_drawTrackPointsCanvas:function(t){let i=this.trackPointOptions;this._ctx.save();for(let e=0,n=t.length;e<n;e++)if(t[e].isOrigin){let n=o.a.latLng(t[e].lat,t[e].lng),s=i.radius,a=this._map.latLngToLayerPoint(n);this._ctx.beginPath(),this._ctx.arc(a.x,a.y,s,0,2*Math.PI,!1),this._ctx.globalAlpha=i.opacity,i.stroke&&(this._ctx.strokeStyle=i.color,this._ctx.stroke()),i.fill&&(this._ctx.fillStyle=i.fillColor,this._ctx.fill())}this._ctx.restore()},_drawTrackPointsSvg:function(t){for(let i=0,e=t.length;i<e;i++)if(t[i].isOrigin){let e=o.a.latLng(t[i].lat,t[i].lng),n=o.a.circleMarker(e,this.trackPointOptions);n.bindTooltip(this._getTooltipText(t[i]),this.toolTipOptions),this._trackPointFeatureGroup.addLayer(n)}},_drawShipCanvas:function(t){let i=this._getLayerPoint(t),e=t.dir||0,n=this.targetOptions.width,o=this.targetOptions.height,s=o/3;this._ctx.save(),this._ctx.fillStyle=this.targetOptions.fillColor,this._ctx.strokeStyle=this.targetOptions.color,this._ctx.translate(i.x,i.y),this._ctx.rotate(Math.PI/180*e),this._ctx.beginPath(),this._ctx.moveTo(0,0-o/2),this._ctx.lineTo(0-n/2,0-o/2+s),this._ctx.lineTo(0-n/2,0+o/2),this._ctx.lineTo(0+n/2,0+o/2),this._ctx.lineTo(0+n/2,0-o/2+s),this._ctx.closePath(),this._ctx.fill(),this._ctx.stroke(),this._ctx.restore()},_drawShipImage:function(t){let i=this._getLayerPoint(t),e=t.dir||0,n=this.targetOptions.width,o=this.targetOptions.height,s=n/2,a=o/2;this._ctx.save(),this._ctx.translate(i.x,i.y),this._ctx.rotate(Math.PI/180*e),this._ctx.drawImage(this._targetImg,0-s,0-a,n,o),this._ctx.restore()},_getTooltipText:function(t){let i=[];if(i.push("<table>"),t.info&&t.info.length)for(let e=0,n=t.info.length;e<n;e++)i.push("<tr>"),i.push("<td>"+t.info[e].key+"</td>"),i.push("<td>"+t.info[e].value+"</td>"),i.push("</tr>");return i.push("</table>"),i.join("")},_clearLayer:function(){let t=this._trackLayer.getBounds();if(t){let i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height);this._map.hasLayer(this._trackPointFeatureGroup)&&this._trackPointFeatureGroup.clearLayers()},_getLayerPoint(t){return this._map.latLngToLayerPoint(o.a.latLng(t.lat,t.lng))}}),u=o.a.Class.extend({includes:o.a.Mixin.Events,initialize:function(t,i,e={}){let n={trackPointOptions:e.trackPointOptions,trackLineOptions:e.trackLineOptions,targetOptions:e.targetOptions,toolTipOptions:e.toolTipOptions};this.tracks=this._initTracks(t),this.draw=new l(i,n),this.trackController=new r(this.tracks,this.draw),this.clock=new c(this.trackController,e.clockOptions),this.clock.on("tick",this._tick,this)},start:function(){return this.clock.start(),this},stop:function(){return this.clock.stop(),this},rePlaying:function(){return this.clock.rePlaying(),this},slowSpeed:function(){return this.clock.slowSpeed(),this},quickSpeed:function(){return this.clock.quickSpeed(),this},getSpeed:function(){return this.clock.getSpeed()},getCurTime:function(){return this.clock.getCurTime()},getStartTime:function(){return this.clock.getStartTime()},getEndTime:function(){return this.clock.getEndTime()},isPlaying:function(){return this.clock.isPlaying()},setCursor:function(t){return this.clock.setCursor(t),this},setSpeed:function(t){return this.clock.setSpeed(t),this},showTrackPoint:function(){return this.draw.showTrackPoint(),this},hideTrackPoint:function(){return this.draw.hideTrackPoint(),this},showTrackLine:function(){return this.draw.showTrackLine(),this},hideTrackLine:function(){return this.draw.hideTrackLine(),this},dispose:function(){this.clock.off("tick",this._tick),this.draw.remove(),this.tracks=null,this.draw=null,this.trackController=null,this.clock=null},_tick:function(t){this.fire("tick",t)},_initTracks:function(t){let i=[];if(s(t))if(s(t[0]))for(let e=0,n=t.length;e<n;e++)i.push(new a(t[e]));else i.push(new a(t));return i}});o.a.TrackPlayBack=u,o.a.trackplayback=function(t,i,e){return new u(t,i,e)}}])}))},cb90:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAXCAYAAADUUxW8AAAACXBIWXMAAC4jAAAuIwF4pT92AAAHYmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTEyLTIzVDE1OjE0OjI2KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTEyLTIzVDE1OjE0OjI2KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0xMi0yM1QxNToxNDoyNiswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0ZDY0MmVjNy1iYWNkLWVkNGEtYjQzZS0xZjlkZDQ5MzM1YjEiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZjU4MzFiNi1mNThkLWQyNDktYTcwYi01NGFkNzI0OGU4MTgiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1NWYwN2ZiNy0wMzc3LTgzNGQtYjNlZi0xYjliNWU2NTI3ZDkiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjU1ZjA3ZmI3LTAzNzctODM0ZC1iM2VmLTFiOWI1ZTY1MjdkOSIgc3RFdnQ6d2hlbj0iMjAyMC0xMi0yM1QxNToxNDoyNiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0ZDY0MmVjNy1iYWNkLWVkNGEtYjQzZS0xZjlkZDQ5MzM1YjEiIHN0RXZ0OndoZW49IjIwMjAtMTItMjNUMTU6MTQ6MjYrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+NkE3NjZBN0JBMDUzMUVGNTAwRTQ4NUQ2MzJGNDU3MkM8L3JkZjpsaT4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6MTcyMGE1YjAtODE3NS0xODRhLTlhZjEtNDc5N2ExODkzYjU3PC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjM2OTQxZDBiLTIyNWEtNTA0OC1hYzM4LWU4OTI2N2RlODViZjwvcmRmOmxpPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDplYzdkOTU0Zi1lNmFkLTRlNDktYWEzYS01ZDBhMWRmMWRiMjg8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5Sbl1fAAADmElEQVQ4jW2UTW8bVRSGnzsz9tgTx7FjuwlJ40YubQJNGhEWSGzyUbGJ1CIQC9gghEp/AUHiBxBYQcQPQOqGVgh2bAiIIgJSSdtNUUmrfLVpE8exHTtjHCfOzD0sPIYsuNLdzNznvvOeM+dVtJYCwkAMSAJdQDR43gD2gQpQA5qAtKE22A1kgbPA6eACAmALWAU2gTJwBIgFWEACeB4Yn5yauhTril/MDmRjhkL9ef9+3bbtvxZ+WFgAbEAHFzSt4POeA0aHhodfm539cOp09kw0k8koQ4Riudhd3C1l9vYq5t07d3zg78CKZwIp4HwikZicnZ2dmZiejMViMRW1bcyQRYfjkOxOWj09vb1LS3+4Nbe2FSjXjUA51d/fnxu9ONrh+xrLsnAcByfqoAyTo+YxY2Nj0aGh4bNAGnAA0wqK5UQdJ5ZIJI1TmVM82djg8foG2veJx+NkBwcxDJRpmh1AR+DdsAADsDo7O43NzU2Zm/tELT98SKlUJpXqJp1J0xWLc/XaB6TTKQMwA0ZZQTtIpdPOrV9uGUv37uJEo/T29TCYy7H19Bm/L/5GZzyOZYUinFgG4APHK48eVfv6+nzbttktFHE6OshvbfN4bR3TMLkwckEKhUINOA4YbbXhWq3WyOd39FtvvGlOTUySyWTQWuPWaiwu/spOYUfv7+/XT8BiBU33XdeVaqXCtY9meXH4BXzfR0SwLItcLsfcZ59SLpU04J1UFkC01hIOh6hWqogI9XodESESieDWXCKRCIZhSPt827MCCIXDErJtGgcHKKUQEUQEBRw2DmkeNSUSjeqTBWtXWyGiCvk8u8VdADzPQ0RAKVzXJb+9rXzfN/4PRkSU52vVnU4DkEwm0br1t6XSKTzfU9r3Tf6bRP71bBiGnp6ektW1VZYfPGD8pXGUMlhZW+GgfsDlK5dl/vN576TntrKE7bCcO3de5ue/YOGnHzmTzeK6NSrFEiMjI3x1/TqitW63qd2qY+CwedQ8qLr7+tLMDFtb2/ieh9VlkEokef2dtynvlXXjsFEPxrHZhg+BvVKptP79t98VPn7/6sCVGzeMRrOJiOCEw8hOUb68+XWxVCytAXsBIyqYkizwck8qNfFKyH51/L13064Sy/c0XVr7yze/2bvte7ef7uR/Bu4BT4C6CnzHgX5aUTRAKyDaQ3AUqG0Ca8AzWoHoqRMtc2hlWYJWioaCdx6t6KkG+yCoE/8AbKiN4uwyPQYAAAAASUVORK5CYII="},ed6f:function(t,i,e){},f164:function(t,i,e){}}]);